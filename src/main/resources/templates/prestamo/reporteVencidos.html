<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Reporte de Préstamos Vencidos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
          rel="stylesheet">
</head>
<body>

<div class="container mt-4">
    <h2 class="mb-4 text-danger">Reporte de Préstamos Vencidos</h2>
    <p class="text-muted">Generado al: <span th:text="${fechaReporte}"></span></p>
    <hr>
    
    <a th:href="@{/prestamos}" class="btn btn-secondary mb-3">
        <i class="bi bi-arrow-left"></i> Volver a Gestión de Préstamos
    </a>

    <div th:if="${vencidos.isEmpty()}" class="alert alert-success">
        ¡Felicidades! No hay préstamos vencidos al día de hoy.
    </div>

    <div th:if="${!vencidos.isEmpty()}" class="table-responsive">
        <table class="table table-bordered table-striped table-hover">
            <thead class="table-danger">
                <tr>
                    <th>ID Préstamo</th>
                    <th>Socio</th>
                    <th>Libro</th>
                    <th>F. Límite</th>
                    <th>Días de Retraso (Estimado)</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="p : ${vencidos}">
                    <td th:text="${p.id}">1</td>
                    <td th:text="${p.socio.nombre + ' (' + p.socio.identificacion + ')'}"></td>
                    <td th:text="${p.libro.titulo}"></td>
                    <td th:text="${p.fechaDevolucionEsperada}"></td>
                    <td>
                        <span class="badge bg-danger" 
                              th:with="hoy=${T(java.time.LocalDate).now()}"
                              th:text="${T(java.time.temporal.ChronoUnit).DAYS.between(p.fechaDevolucionEsperada, hoy)} + ' días'">
                              3 días
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>